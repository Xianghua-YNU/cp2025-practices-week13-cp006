# 傅立叶滤波和平滑 - 实验报告

## 1. 实验目的

本实验旨在通过对道琼斯工业平均指数数据进行傅立叶变换和滤波处理，达到以下目标：
- 掌握傅立叶变换在金融时间序列分析中的应用
- 理解不同频率成分对信号的影响
- 学习通过频域滤波提取信号特征的方法
- 分析滤波参数变化对结果的影响

## 2. 方法简述

请简要描述您实现的算法和方法，特别是：
- 数据加载和预处理的方法
- 答：使用np.loadtxt函数从文本文件加载道琼斯工业平均指数数据，未进行复杂预处理 。
- 傅立叶变换和逆变换的实现
- 答:利用numpy库的np.fft.rfft计算实数信号的傅立叶变换，得到频域系数；通过np.fft.irfft进行逆变换，将滤波后的频域系数转换回时域信号。
- 滤波器的设计原理（保留前10%和前2%系数的实现）
- 答：依据设定的保留系数比例（如 10%、2% ），确定截止位置，将对应位置之后的傅立叶系数置为 0，保留低频主要成分，去除高频噪声。
- 可视化方法的选择
- 答：采用matplotlib库的plt.plot绘制时间序列图，展示原始数据和滤波后数据，添加标题、坐标轴标签和网格线增强可读性。
_在此处填写您的方法描述（约200-300字）_
答：
- 数据加载和预处理的方法
- 答：使用np.loadtxt函数从文本文件加载道琼斯工业平均指数数据，未进行复杂预处理 。
- 傅立叶变换和逆变换的实现
- 答:利用numpy库的np.fft.rfft计算实数信号的傅立叶变换，得到频域系数；通过np.fft.irfft进行逆变换，将滤波后的频域系数转换回时域信号。
- 滤波器的设计原理（保留前10%和前2%系数的实现）
- 答：依据设定的保留系数比例（如 10%、2% ），确定截止位置，将对应位置之后的傅立叶系数置为 0，保留低频主要成分，去除高频噪声。
- 可视化方法的选择
- 答：采用matplotlib库的plt.plot绘制时间序列图，展示原始数据和滤波后数据，添加标题、坐标轴标签和网格线增强可读性。
## 3. 实验结果

### 3.1 原始数据时间序列

请在此处粘贴您生成的道琼斯工业平均指数原始数据时间序列图，并说明您从图中观察到的特征。

_在此处插入原始数据时间序列图像_
![image](https://github.com/user-attachments/assets/10d8d73c-f2f4-4a7f-8723-dcc311aafd5f)

图像说明：
_在此处添加对图像的解释（约100字）_
答：原始数据波动频繁，存在明显高峰和低谷。整体呈现先上升，后大幅下降，再逐渐回升的趋势，反映出道琼斯指数在该时间段内的复杂变化。
### 3.2 保留前10%系数的滤波结果

请在此处粘贴您生成的保留前10%傅立叶系数的滤波结果图像，并说明：
_在此处插入10%滤波结果图像_
![image](https://github.com/user-attachments/assets/007503a4-9a39-4e75-9031-88502bc3092e)
图像说明：
_在此处添加对图像的解释（约100字）_
1. 滤波后信号与原始信号的差异
 答：滤波后信号相较于原始信号，波动明显减少，平滑度提升，但仍保留了原始信号的大致趋势和主要波动特征。
2. 被抑制的频率成分对信号的影响
 答：被抑制的高频成分主要是短期的随机波动，去除这些成分后，信号更能体现中期趋势，减少了短期噪声干扰 。

### 3.3 保留前2%系数的滤波结果

请在此处粘贴您生成的保留前2%傅立叶系数的滤波结果图像，并说明：
1. 与10%滤波结果的对比
2. 更严格滤波对信号的影响
_在此处插入2%滤波结果图像_
![image](https://github.com/user-attachments/assets/7efa8e8e-51f1-4d84-b171-0329e2a8228c)
图像说明：
_在此处添加对图像的解释（约100字）_
对比：与 10% 滤波结果相比，2% 滤波结果更加平滑，几乎消除了所有短期波动，仅保留了长期趋势。
影响：更严格滤波进一步突出长期趋势，但也损失了更多细节信息，可能会掩盖一些短期但重要的市场变化。

## 4. 分析与讨论

### 4.1 不同滤波参数的影响

请讨论：
- 保留10%系数与保留2%系数结果的差异
- 不同滤波强度对信号平滑程度的影响
- 过度滤波可能导致的问题
_在此处填写您的分析（约200字）_
答：1.保留 10% 系数的滤波保留了部分短期波动，能兼顾中短期趋势；保留 2% 系数的滤波则过度平滑，几乎只呈现长期趋势。
    2.滤波强度越大，信号越平滑。
    3.但过度滤波会丢失信号细节，可能使重要信息被掩盖，无法反映市场短期变化。
### 4.2 金融时间序列的频率特征

讨论道琼斯指数中不同频率成分可能代表的经济现象：
- 低频成分（长期趋势）反映了什么经济因素？
- 高频成分（短期波动）通常由什么因素引起？
_在此处填写您的讨论（约200字）_
答：1.低频成分反映宏观经济因素，如经济增长趋势、货币政策长期走向、产业结构调整等，体现市场长期发展态势。
    2.高频成分通常由短期事件引起，如公司财报发布、突发政治事件、短期资金流动变化等，代表市场短期波动和不确定性。

### 4.3 思考题

1. 如果我们对道琼斯指数数据进行对数变换后再进行傅立叶分析，结果会有什么不同？

_在此处填写您的回答（约100字）_
答：对数变换影响：对数变换可压缩数据动态范围，使数据分布更均匀。傅立叶分析时，可能改变不同频率成分的相对强度，高频成分可能得到相对增强，低频成分相对减弱，有助于更清晰观察某些频率特征。
2. 傅立叶变换假设信号是周期性的，但金融数据通常不是严格周期性的。这会导致什么问题？
_在此处填写您的回答（约100字）_
答：非周期性问题：傅立叶变换基于信号周期性假设，金融数据非周期性会导致频谱泄漏，即信号能量分散到非真实频率上，影响频率成分识别准确性，使滤波效果偏离预期，难以精准分离不同频率成分。

## 5. 结论

总结本实验的主要发现和收获，包括：
- 傅立叶滤波在金融数据分析中的应用价值
- 不同滤波参数的选择经验
- 实验过程中遇到的挑战和解决方法
_在此处填写您的结论（约150字）_
答：1.傅立叶滤波在金融数据分析中可有效平滑数据，突出趋势，辅助分析长期走势。
    2.选择滤波参数时，需在平滑度和细节保留间权衡，10% 系数保留较多细节，2% 系数突出长期趋势。
    3.实验中遇到数据加载和滤波效果不理想问题，通过检查代码和调整参数解决。

## 核心代码片段

请粘贴您实现的关键函数代码（如滤波函数实现），并简要说明代码的核心思路。

```python
# 在此处粘贴核心代码片段（不超过30行）
import numpy as np

def fourier_filter(data, keep_fraction=0.1):
    """执行傅立叶变换并低通滤波"""
    # 傅立叶变换到频域
    fft_coeff = np.fft.rfft(data)
    
    # 计算保留的低频系数数量
    cutoff = int(len(fft_coeff) * keep_fraction)
    
    # 低通滤波：保留低频成分，丢弃高频
    filtered_coeff = fft_coeff.copy()
    filtered_coeff[cutoff:] = 0
    
    # 逆变换回时域
    filtered_data = np.fft.irfft(filtered_coeff, n=len(data))
    
    return filtered_data, fft_coeff

# 使用示例
data = np.loadtxt('dow.txt')  # 加载数据
filtered, _ = fourier_filter(data, 0.1)  # 保留10%低频系数

```

代码说明：
_在此处简要解释代码的实现思路（约100字）_
答：
频域转换：通过np.fft.rfft将时域信号转换为频域系数，实信号的频谱具有对称性，因此只计算正频率部分
低通滤波：根据keep_fraction确定保留的低频系数比例，将高频部分（对应短期波动）置零
时域恢复：通过np.fft.irfft将滤波后的频域系数转回时域，得到平滑后的信号
参数作用：keep_fraction越小，保留的低频成分越少，滤波后信号越平滑，但可能丢失重要趋势信息
该算法通过频域操作实现信号平滑，本质是通过去除高频噪声突出低频趋势，在金融分析中可用于识别市场长期趋势。
